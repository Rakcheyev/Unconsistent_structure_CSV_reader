# AGENTS RULES

## Mission Alignment
1. **Workflow-first**: усі задачі виконуються згідно з головним сценарієм Import → Analyze → Review → Normalize → Materialize → Export.
2. **Python baseline**: доки не з’явиться інша вказівка, усі прототипи пишемо на Python 3.11+ із стандартною бібліотекою та мінімумом сторонніх залежностей.
3. **Non-blocking UX**: будь-яка важка операція (аналіз, матеріалізація) запускається у фонових задачах; UI-агент відповідає лише за прогрес і взаємодію з користувачем.

## Collaboration Contract
- **Docs first**: перед реалізацією нової фічі оновлюємо відповідний `TASKS.md` та профіль у `docs/`.
- **Single source of truth**: моделі даних визначає `src/common/models.py`; інші модулі не дублюють типи, а лише імпортують.
- **Observability**: кожен технічний агент логує свої рішення (прогрес, помилки, статистику) в окремий канал Storage, щоб UI міг показувати історію job'ів.
- **No silent retries**: у разі збою модулі зобов'язані підняти помилку в Error Log Panel; тихе замовчування заборонено.

## Definition of Done
1. Оновлений `TASKS.md` з позначкою статусу/owner-а.
2. Документовані інтерфейси (type hints / docstrings) + лінк на відповідний UX-флоу, якщо релевантно.
3. Тести або принаймні детальний план тестування для CPU/IO важких частин.
4. Дані конфігурації оновлені в JSON/SQLite шарі без ручного патчингу файлів користувача.

## Coding Standards
- **ASCII-only** кодування за замовчуванням; Unicode лише якщо потребують реальні дані.
- **Коментарі тільки де треба**: пояснюємо нетривіальні алгоритми (семплінг, кластеринг), а не банальні присвоєння.
- **Ізольовані залежності**: нові бібліотеки додаємо через `pyproject.toml` після обговорення; поки що працюємо на stdlib.

## Escalation Policy
- UX/продуктові суперечки → `docs/ui_ux.md` owner.
- Технічні компроміси (продуктивність vs якість) → Core Tech lead (`src/core/TASKS.md`).
- Якщо виявлено несподівані зміни у workspace, роботу зупиняємо та ескалуємо замовнику.
